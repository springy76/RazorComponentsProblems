@page "/"

@inject Services.CircuitIdService CircuitIdService

<h1>Hello, world!</h1>
<h6>@this.CircuitIdService.Id</h6>

@if ( this.countdown is int cd )
{
    <p>... only @cd s ...</p>
}
else
{
    <p>Welcome to your new app.</p>
}

@functions
{
    private int? countdown;

    protected override void OnInit()
    {
        base.OnInit();

        System.Threading.Thread.Sleep(1000); // simulate CPU-bound work (to see the prerendered content for a second)
    }

    protected override async Task OnInitAsync()
    {
        await base.OnInitAsync();

        for ( int i = 0; i < 3; i++ )
        {
            this.countdown = 3 - i;
            this.StateHasChanged();
            await Task.Delay(1000); // simulate IO-bound work
        }

        this.countdown = null;
    }
}